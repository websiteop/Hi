<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Flying Bird WorldCup</title>
<style>
body{
    margin:0;
    overflow:hidden;
    background:linear-gradient(#4facfe,#00f2fe);
    font-family:Arial;
}
canvas{ display:block; }

#score{
    position:fixed;
    top:20px;
    left:20px;
    font-size:22px;
    color:white;
    font-weight:bold;
}

.popup{
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    background:white;
    padding:30px;
    border-radius:20px;
    text-align:center;
    display:none;
    animation:pop 0.5s ease;
}
@keyframes pop{
    from{transform:translate(-50%,-50%) scale(0);}
    to{transform:translate(-50%,-50%) scale(1);}
}

.popup img{
    width:120px;
}

button{
    padding:10px 20px;
    font-size:16px;
    border:none;
    border-radius:10px;
    background:#4facfe;
    color:white;
    cursor:pointer;
}
</style>
</head>
<body>

<div id="score">Pillars: 0 / 20</div>
<canvas id="game"></canvas>

<!-- WIN POPUP -->
<div id="winScreen" class="popup">
    <img src="https://pin.it/3uLoYJafD">
    <h1>üèÜ YU WIN!</h1>
    <p>20 Pillars Cleared Successfully</p>
    <button onclick="restartGame()">Play Again</button>
</div>

<!-- LOSE POPUP -->
<div id="loseScreen" class="popup">
    <img src="sep.png">
    <h1>KIU RE MADERCOD !</h1>
    <p>Try Again Champion</p>
    <button onclick="restartGame()">Restart</button>
</div>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");

canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

/* ‚úÖ IMAGE PRELOAD (Added Only This) */
const preloadWinImg = new Image();
preloadWinImg.src = "https://pin.it/3uLoYJafD";

const preloadLoseImg = new Image();
preloadLoseImg.src = "https://pin.it/3uLoYJafD";

let birdY=canvas.height/2;
let velocity=0;
let gravity=0.6;
let lift=-10;

let pillars=[];
let frame=0;
let score=0;
let gameOver=false;

function drawBird(){
    ctx.fillStyle="yellow";
    ctx.beginPath();
    ctx.arc(100,birdY,20,0,Math.PI*2);
    ctx.fill();
}

function createPillar(){
    let gap=150;
    let topHeight=Math.random()*(canvas.height-300)+50;
    pillars.push({
        x:canvas.width,
        top:topHeight,
        bottom:topHeight+gap,
        passed:false
    });
}

function drawPillars(){
    ctx.fillStyle="green";
    pillars.forEach(p=>{
        ctx.fillRect(p.x,0,50,p.top);
        ctx.fillRect(p.x,p.bottom,50,canvas.height);
    });
}

function endGame(win){
    gameOver=true;
    if(win){
        document.getElementById("winScreen").style.display="block";
    }else{
        document.getElementById("loseScreen").style.display="block";
    }
}

function updatePillars(){
    pillars.forEach(p=>{
        p.x-=4;

        if(!p.passed && p.x<100){
            p.passed=true;
            score++;
            document.getElementById("score").innerText="Pillars: "+score+" / 20";
        }

        if(
            100+20>p.x && 100-20<p.x+50 &&
            (birdY-20<p.top || birdY+20>p.bottom)
        ){
            endGame(false);
        }
    });

    pillars=pillars.filter(p=>p.x>-60);

    if(score>=20){
        endGame(true);
    }
}

function update(){
    if(gameOver) return;

    ctx.clearRect(0,0,canvas.width,canvas.height);

    velocity+=gravity;
    birdY+=velocity;

    if(birdY>canvas.height || birdY<0){
        endGame(false);
    }

    if(frame%90===0){
        createPillar();
    }

    drawBird();
    drawPillars();
    updatePillars();

    frame++;
    requestAnimationFrame(update);
}

function restartGame(){
    location.reload();
}

document.addEventListener("touchstart",()=>velocity=lift);
document.addEventListener("click",()=>velocity=lift);

update();
</script>

</body>
</html>